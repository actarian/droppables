{"version":3,"sources":["docs/modules/droppables.js"],"names":["window","angular","module","directive","$parse","$timeout","Utils","Style","ElementRect","Droppables","require","link","scope","element","attributes","model","onStart","e","condition","down","getTouch","addDragListeners","onMove","move","diff","difference","dragging","power","addClass","style","transform","x","y","set","target","elementRect","nativeElement","offset","rects","getIntersections","length","native","onEnd","removeClass","fromIndex","droppableIndex","fromModel","ngModel","event","forEach","rect","index","data","droppable","from","to","$emit","removeDragListeners","on","off","addListeners","removeListeners","selector","draggableItem","undefined","draggableIf","querySelector","$on","onGetData","droppableIf","droppableItem","add","remove","factory","Animate","callback","useTimeout","this","isPlaying","key","ticks","prototype","play","loop","time","_this","setTimeout","requestAnimationFrame","pause","clearTimeout","cancelAnimationFrame","playpause","cycle","k","a","b","c","d","ff","gg","hh","ii","add32","cmn","q","s","t","md51","i","n","state","md5blk","substring","tail","charCodeAt","md5blks","rhex","j","hex_chr","hex","join","Md5","split","encode","string","lsw","msw","$compile","$controller","Vector","previous","type","touch","originalEvent","touches","changedTouches","pageX","pageY","getRelativeTouch","point","getBoundingClientRect","left","top","getClosest","el","matchesFn","parent","some","fn","document","body","parentElement","getClosestElement","throttle","func","wait","options","context","args","result","timeout","later","leading","getNow","apply","now","remaining","arguments","trailing","where","array","query","found","item","has","value","compileController","html","contents","controller","$scope","$new","extend","controllerAs","children","reverseSortOn","format","prepend","expression","splitted","formatted","shift","reducer","o","reducerSetter","slice","reducerAdder","lastTime","vendors","currTime","Date","getTime","timeToCall","Math","max","id","Array","reduce","Object","defineProperty","TypeError","len","ua","navigator","userAgent","toLowerCase","safari","indexOf","msie","chrome","mobile","toMd5","getElementsByTagName","make","size","sqrt","normalize","l","incidence","angle","atan2","distance","cross","abs","towards","friction","copy","toString","width","height","center","fromNative","offsetWidth","offsetHeight","vector","intersect","props","scale","hoverScale","currentScale","prefix","webkit","div","createElement","every","prop","prefixed","styles","push","cssText","transformOrigin","round","service","natives","callbacks","splice","intersections","bind","sort"],"mappings":"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","file":"droppables.min.js","sourcesContent":["\n(function(window, angular) {'use strict';\n\n/* global angular */\r\n\r\nvar module = angular.module('droppables', ['ng']);\r\n\n/* global angular, module */\r\n\r\n// window.console ? null : window.console = { log: function () { } };\r\n\n/* global angular, module */\r\n\n/* global angular, module */\r\n\r\nmodule.directive('draggableItem', ['$parse', '$timeout', 'Utils', 'Style', 'ElementRect', 'Droppables', function ($parse, $timeout, Utils, Style, ElementRect, Droppables) {\r\n\r\n    return {\r\n        require: 'ngModel',\r\n        link: function (scope, element, attributes, model) {\r\n            var nativeElement = element[0];\r\n            var selector = attributes.draggableItem || '.item';\r\n            var condition = attributes.draggableIf !== undefined ? $parse(attributes.draggableIf) : function () { return true; };\r\n            var target = nativeElement.querySelector(selector);\r\n            var style = new Style();\r\n            var elementRect = new ElementRect();\r\n            var down, move, diff, dragging, rects;\r\n            function onStart(e) {\r\n                if (condition(scope)) {\r\n                    down = Utils.getTouch(e);\r\n                    addDragListeners();\r\n                }\r\n                return false;\r\n            }\r\n            function onMove(e) {\r\n                move = Utils.getTouch(e);\r\n                diff = down.difference(move);\r\n                if (!dragging && diff.power() > 25) {\r\n                    dragging = true;\r\n                    element.addClass('dragging');\r\n                }\r\n                if (dragging) {\r\n                    style.transform = 'translateX(' + diff.x + 'px) translateY(' + diff.y + 'px)';\r\n                    style.set(target);\r\n                    elementRect.set(nativeElement).offset(diff);\r\n                    rects = Droppables.getIntersections(elementRect);\r\n                    if (rects.length) {\r\n                        angular.element(rects[0].native).addClass('dropping');\r\n                    }\r\n                }\r\n                // console.log(diff);\r\n                return false;\r\n            }\r\n            function onEnd(e) {\r\n                if (dragging) {\r\n                    dragging = false;\r\n                    element.removeClass('dragging');\r\n                    style.transform = 'none';\r\n                    style.set(target);\r\n                    var fromIndex = $parse(attributes.droppableIndex)(scope);\r\n                    var fromModel = $parse(attributes.ngModel)(scope);\r\n                    if (rects.length) {\r\n                        var event = null;\r\n                        angular.forEach(rects, function (rect, index) {\r\n                            angular.element(rect.native).removeClass('dropping over');\r\n                            if (rect.data.droppable(scope) && !event) {\r\n                                event = {\r\n                                    from: {\r\n                                        index: fromIndex,\r\n                                        model: fromModel,\r\n                                        target: target,\r\n                                    },\r\n                                    to: {\r\n                                        index: rect.data.index,\r\n                                        model: rect.data.model,\r\n                                        target: rect.native\r\n                                    },\r\n                                };\r\n                                $timeout(function () {\r\n                                    scope.$emit('onDropItem', event);\r\n                                });\r\n                            }\r\n                        });\r\n                    } else {\r\n                        var event = {\r\n                            from: {\r\n                                index: fromIndex,\r\n                                model: fromModel,\r\n                                target: target,\r\n                            },\r\n                            to: null,\r\n                        };\r\n                        $timeout(function () {\r\n                            scope.$emit('onDropOut', event);\r\n                        });\r\n                    }\r\n                }\r\n                removeDragListeners();\r\n                return false;\r\n            }\r\n            function addDragListeners() {\r\n                angular.element(window).on('touchmove mousemove', onMove);\r\n                angular.element(window).on('touchend mouseup', onEnd);\r\n            };\r\n            function removeDragListeners() {\r\n                angular.element(window).off('touchmove mousemove', onMove);\r\n                angular.element(window).off('touchend mouseup', onEnd);\r\n            };\r\n            function addListeners() {\r\n                element.on('touchstart mousedown', onStart);\r\n            };\r\n            function removeListeners() {\r\n                element.off('touchstart mousedown', onStart);\r\n            };\r\n            scope.$on('$destroy', function () {\r\n                removeListeners();\r\n            });\r\n            addListeners();\r\n        }\r\n    };\r\n}]);\r\n\r\nmodule.directive('droppableItem', ['$parse', 'Utils', 'Style', 'Droppables', function ($parse, Utils, Style, Droppables) {\r\n    var droppables = {};\r\n    return {\r\n        require: 'ngModel',\r\n        link: function (scope, element, attributes, model) {\r\n            var nativeElement = element[0];\r\n            var selector = attributes.droppableItem || '.item';\r\n            function onGetData() {\r\n                var index = $parse(attributes.droppableIndex)(scope);\r\n                var model = $parse(attributes.ngModel)(scope);\r\n                var droppable = attributes.droppableIf !== undefined ? $parse(attributes.droppableIf) : function () { return true };\r\n                return {\r\n                    index: index,\r\n                    model: model,\r\n                    droppable: droppable,\r\n                };\r\n            }\r\n            Droppables.add(nativeElement, onGetData);\r\n            scope.$on('$destroy', function () {\r\n                Droppables.remove(nativeElement);\r\n            });\r\n        }\r\n    }\r\n}]);\r\n\n/* global angular, module */\r\n\n/* global angular, module */\r\n\r\nmodule.factory('Animate', [function () {\r\n    function Animate(callback, useTimeout) {\r\n        this.callback = callback;\r\n        this.isPlaying = false;\r\n        this.key = null;\r\n        this.ticks = 0;\r\n        this.useTimeout = useTimeout === true ? true : false;\r\n    }\r\n    Animate.prototype = {\r\n        play: function () {\r\n            var _this = this;\r\n            function loop(time) {\r\n                _this.ticks++;\r\n                _this.callback(time, _this.ticks);\r\n                if (this.useTimeout) {\r\n                    _this.key = window.setTimeout(loop, 1000 / 60);\r\n                } else {\r\n                    _this.key = window.requestAnimationFrame(loop);\r\n                }\r\n            }\r\n            if (!this.key) {\r\n                this.isPlaying = true;\r\n                loop();\r\n            }\r\n        },\r\n        pause: function () {\r\n            if (this.key) {\r\n                if (this.useTimeout) {\r\n                    window.clearTimeout(this.key);\r\n                } else {\r\n                    window.cancelAnimationFrame(this.key);\r\n                }\r\n                this.key = null;\r\n                this.isPlaying = false;\r\n            }\r\n        },\r\n        playpause: function () {\r\n            if (this.key) {\r\n                this.pause();\r\n            } else {\r\n                this.play();\r\n            }\r\n        }\r\n    }\r\n    return Animate;\r\n}]);\r\n\r\nmodule.factory('Md5', [function () {\r\n\r\n    var hex_chr = '0123456789abcdef'.split('');\r\n\r\n    function cycle(x, k) {\r\n        var a = x[0], b = x[1], c = x[2], d = x[3];\r\n\r\n        a = ff(a, b, c, d, k[0], 7, -680876936);\r\n        d = ff(d, a, b, c, k[1], 12, -389564586);\r\n        c = ff(c, d, a, b, k[2], 17, 606105819);\r\n        b = ff(b, c, d, a, k[3], 22, -1044525330);\r\n        a = ff(a, b, c, d, k[4], 7, -176418897);\r\n        d = ff(d, a, b, c, k[5], 12, 1200080426);\r\n        c = ff(c, d, a, b, k[6], 17, -1473231341);\r\n        b = ff(b, c, d, a, k[7], 22, -45705983);\r\n        a = ff(a, b, c, d, k[8], 7, 1770035416);\r\n        d = ff(d, a, b, c, k[9], 12, -1958414417);\r\n        c = ff(c, d, a, b, k[10], 17, -42063);\r\n        b = ff(b, c, d, a, k[11], 22, -1990404162);\r\n        a = ff(a, b, c, d, k[12], 7, 1804603682);\r\n        d = ff(d, a, b, c, k[13], 12, -40341101);\r\n        c = ff(c, d, a, b, k[14], 17, -1502002290);\r\n        b = ff(b, c, d, a, k[15], 22, 1236535329);\r\n\r\n        a = gg(a, b, c, d, k[1], 5, -165796510);\r\n        d = gg(d, a, b, c, k[6], 9, -1069501632);\r\n        c = gg(c, d, a, b, k[11], 14, 643717713);\r\n        b = gg(b, c, d, a, k[0], 20, -373897302);\r\n        a = gg(a, b, c, d, k[5], 5, -701558691);\r\n        d = gg(d, a, b, c, k[10], 9, 38016083);\r\n        c = gg(c, d, a, b, k[15], 14, -660478335);\r\n        b = gg(b, c, d, a, k[4], 20, -405537848);\r\n        a = gg(a, b, c, d, k[9], 5, 568446438);\r\n        d = gg(d, a, b, c, k[14], 9, -1019803690);\r\n        c = gg(c, d, a, b, k[3], 14, -187363961);\r\n        b = gg(b, c, d, a, k[8], 20, 1163531501);\r\n        a = gg(a, b, c, d, k[13], 5, -1444681467);\r\n        d = gg(d, a, b, c, k[2], 9, -51403784);\r\n        c = gg(c, d, a, b, k[7], 14, 1735328473);\r\n        b = gg(b, c, d, a, k[12], 20, -1926607734);\r\n\r\n        a = hh(a, b, c, d, k[5], 4, -378558);\r\n        d = hh(d, a, b, c, k[8], 11, -2022574463);\r\n        c = hh(c, d, a, b, k[11], 16, 1839030562);\r\n        b = hh(b, c, d, a, k[14], 23, -35309556);\r\n        a = hh(a, b, c, d, k[1], 4, -1530992060);\r\n        d = hh(d, a, b, c, k[4], 11, 1272893353);\r\n        c = hh(c, d, a, b, k[7], 16, -155497632);\r\n        b = hh(b, c, d, a, k[10], 23, -1094730640);\r\n        a = hh(a, b, c, d, k[13], 4, 681279174);\r\n        d = hh(d, a, b, c, k[0], 11, -358537222);\r\n        c = hh(c, d, a, b, k[3], 16, -722521979);\r\n        b = hh(b, c, d, a, k[6], 23, 76029189);\r\n        a = hh(a, b, c, d, k[9], 4, -640364487);\r\n        d = hh(d, a, b, c, k[12], 11, -421815835);\r\n        c = hh(c, d, a, b, k[15], 16, 530742520);\r\n        b = hh(b, c, d, a, k[2], 23, -995338651);\r\n\r\n        a = ii(a, b, c, d, k[0], 6, -198630844);\r\n        d = ii(d, a, b, c, k[7], 10, 1126891415);\r\n        c = ii(c, d, a, b, k[14], 15, -1416354905);\r\n        b = ii(b, c, d, a, k[5], 21, -57434055);\r\n        a = ii(a, b, c, d, k[12], 6, 1700485571);\r\n        d = ii(d, a, b, c, k[3], 10, -1894986606);\r\n        c = ii(c, d, a, b, k[10], 15, -1051523);\r\n        b = ii(b, c, d, a, k[1], 21, -2054922799);\r\n        a = ii(a, b, c, d, k[8], 6, 1873313359);\r\n        d = ii(d, a, b, c, k[15], 10, -30611744);\r\n        c = ii(c, d, a, b, k[6], 15, -1560198380);\r\n        b = ii(b, c, d, a, k[13], 21, 1309151649);\r\n        a = ii(a, b, c, d, k[4], 6, -145523070);\r\n        d = ii(d, a, b, c, k[11], 10, -1120210379);\r\n        c = ii(c, d, a, b, k[2], 15, 718787259);\r\n        b = ii(b, c, d, a, k[9], 21, -343485551);\r\n\r\n        x[0] = add32(a, x[0]);\r\n        x[1] = add32(b, x[1]);\r\n        x[2] = add32(c, x[2]);\r\n        x[3] = add32(d, x[3]);\r\n\r\n    }\r\n\r\n    function cmn(q, a, b, x, s, t) {\r\n        a = add32(add32(a, q), add32(x, t));\r\n        return add32((a << s) | (a >>> (32 - s)), b);\r\n    }\r\n\r\n    function ff(a, b, c, d, x, s, t) {\r\n        return cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n    }\r\n\r\n    function gg(a, b, c, d, x, s, t) {\r\n        return cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n    }\r\n\r\n    function hh(a, b, c, d, x, s, t) {\r\n        return cmn(b ^ c ^ d, a, b, x, s, t);\r\n    }\r\n\r\n    function ii(a, b, c, d, x, s, t) {\r\n        return cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n    }\r\n\r\n    function md51(s) {\r\n        var txt = '';\r\n        var n = s.length,\r\n        state = [1732584193, -271733879, -1732584194, 271733878], i;\r\n        for (i = 64; i <= s.length; i += 64) {\r\n            cycle(state, md5blk(s.substring(i - 64, i)));\r\n        }\r\n        s = s.substring(i - 64);\r\n        var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n        for (i = 0; i < s.length; i++)\r\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\r\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n        if (i > 55) {\r\n            cycle(state, tail);\r\n            for (i = 0; i < 16; i++) tail[i] = 0;\r\n        }\r\n        tail[14] = n * 8;\r\n        cycle(state, tail);\r\n        return state;\r\n    }\r\n\r\n    /* there needs to be support for Unicode here,\r\n        * unless we pretend that we can redefine the MD-5\r\n        * algorithm for multi-byte characters (perhaps\r\n        * by adding every four 16-bit characters and\r\n        * shortening the sum to 32 bits). Otherwise\r\n        * I suggest performing MD-5 as if every character\r\n        * was two bytes--e.g., 0040 0025 = @%--but then\r\n        * how will an ordinary MD-5 sum be matched?\r\n        * There is no way to standardize text to something\r\n        * like UTF-8 before transformation; speed cost is\r\n        * utterly prohibitive. The JavaScript standard\r\n        * itself needs to look at this: it should start\r\n        * providing access to strings as preformed UTF-8\r\n        * 8-bit unsigned value arrays.\r\n        */\r\n    function md5blk(s) { /* I figured global was faster.   */\r\n        var md5blks = [], i; /* Andy King said do it this way. */\r\n        for (i = 0; i < 64; i += 4) {\r\n            md5blks[i >> 2] = s.charCodeAt(i)\r\n            + (s.charCodeAt(i + 1) << 8)\r\n            + (s.charCodeAt(i + 2) << 16)\r\n            + (s.charCodeAt(i + 3) << 24);\r\n        }\r\n        return md5blks;\r\n    }\r\n\r\n    function rhex(n) {\r\n        var s = '', j = 0;\r\n        for (; j < 4; j++)\r\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F]\r\n            + hex_chr[(n >> (j * 8)) & 0x0F];\r\n        return s;\r\n    }\r\n\r\n    function hex(x) {\r\n        for (var i = 0; i < x.length; i++)\r\n            x[i] = rhex(x[i]);\r\n        return x.join('');\r\n    }\r\n\r\n    /* this function is much faster,\r\n    so if possible we use it. Some IEs\r\n    are the only ones I know of that\r\n    need the idiotic second function,\r\n    generated by an if clause.  */\r\n    function add32(a, b) {\r\n        return (a + b) & 0xFFFFFFFF;\r\n    }\r\n\r\n    function Md5() { }\r\n    Md5.encode = function (string) {\r\n        return hex(md51(string));\r\n    }\r\n    if (Md5.encode('hello') !== '5d41402abc4b2a76b9719d911017c592') {\r\n        add32 = function (x, y) {\r\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\r\n            msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n            return (msw << 16) | (lsw & 0xFFFF);\r\n        }\r\n    }\r\n    return Md5;\r\n}]);\r\n\r\nmodule.factory('Utils', ['$compile', '$controller', 'Vector', 'Md5', function ($compile, $controller, Vector, Md5) {\r\n    (function () {\r\n        // POLYFILL window.requestAnimationFrame\r\n        var lastTime = 0;\r\n        var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\r\n                                       || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n        }\r\n        if (!window.requestAnimationFrame) {\r\n            window.requestAnimationFrame = function (callback, element) {\r\n                var currTime = new Date().getTime();\r\n                var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n                var id = window.setTimeout(function () { callback(currTime + timeToCall); }, timeToCall);\r\n                lastTime = currTime + timeToCall;\r\n                return id;\r\n            };\r\n        }\r\n        if (!window.cancelAnimationFrame) {\r\n            window.cancelAnimationFrame = function (id) {\r\n                clearTimeout(id);\r\n            };\r\n        }\r\n    }());\r\n    (function () {\r\n        // POLYFILL Array.prototype.reduce\r\n        // Production steps of ECMA-262, Edition 5, 15.4.4.21\r\n        // Reference: http://es5.github.io/#x15.4.4.21\r\n        // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\r\n        if (!Array.prototype.reduce) {\r\n            Object.defineProperty(Array.prototype, 'reduce', {\r\n                value: function (callback) {// , initialvalue\r\n                    if (this === null) {\r\n                        throw new TypeError('Array.prototype.reduce called on null or undefined');\r\n                    }\r\n                    if (typeof callback !== 'function') {\r\n                        throw new TypeError(callback + ' is not a function');\r\n                    }\r\n                    var o = Object(this);\r\n                    var len = o.length >>> 0;\r\n                    var k = 0;\r\n                    var value;\r\n                    if (arguments.length == 2) {\r\n                        value = arguments[1];\r\n                    } else {\r\n                        while (k < len && !(k in o)) {\r\n                            k++;\r\n                        }\r\n                        if (k >= len) {\r\n                            throw new TypeError('Reduce of empty array with no initial value');\r\n                        }\r\n                        value = o[k++];\r\n                    }\r\n                    while (k < len) {\r\n                        if (k in o) {\r\n                            value = callback(value, o[k], k, o);\r\n                        }\r\n                        k++;\r\n                    }\r\n                    return value;\r\n                }\r\n            });\r\n        }\r\n    }());\r\n    var _isTouch;\r\n    function isTouch() {\r\n        if (!_isTouch) {\r\n            _isTouch = {\r\n                value: ('ontouchstart' in window || 'onmsgesturechange' in window)\r\n            }\r\n        }\r\n        // console.log(_isTouch);\r\n        return _isTouch.value;\r\n    }\r\n    function getTouch(e, previous) {\r\n        var t = new Vector();\r\n        if (e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel') {\r\n            var touch = null;\r\n            var event = e.originalEvent ? e.originalEvent : e;\r\n            var touches = event.touches.length ? event.touches : event.changedTouches;\r\n            if (touches && touches.length) {\r\n                touch = touches[0];\r\n            }\r\n            if (touch) {\r\n                t.x = touch.pageX;\r\n                t.y = touch.pageY;\r\n            }\r\n        } else if (e.type == 'click' || e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover' || e.type == 'mouseout' || e.type == 'mouseenter' || e.type == 'mouseleave') {\r\n            t.x = e.pageX;\r\n            t.y = e.pageY;\r\n        }\r\n        if (previous) {\r\n            t.s = Vector.difference(previous, t);\r\n        }\r\n        t.type = e.type;\r\n        return t;\r\n    }\r\n    function getRelativeTouch(element, point) {\r\n        var rect = element[0].getBoundingClientRect();\r\n        var e = new Vector(rect.left, rect.top);\r\n        return Vector.difference(e, point);\r\n    }\r\n    function getClosest(el, selector) {\r\n        var matchesFn, parent;\r\n        ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function (fn) {\r\n            if (typeof document.body[fn] == 'function') {\r\n                matchesFn = fn;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        if (el[matchesFn](selector)) {\r\n            return el;\r\n        }\r\n        while (el !== null) {\r\n            parent = el.parentElement;\r\n            if (parent !== null && parent[matchesFn](selector)) {\r\n                return parent;\r\n            }\r\n            el = parent;\r\n        }\r\n        return null;\r\n    }\r\n    function getClosestElement(el, target) {\r\n        var matchesFn, parent;\r\n        if (el === target) {\r\n            return el;\r\n        }\r\n        while (el !== null) {\r\n            parent = el.parentElement;\r\n            if (parent !== null && parent === target) {\r\n                return parent;\r\n            }\r\n            el = parent;\r\n        }\r\n        return null;\r\n    }\r\n    var getNow = Date.now || function () {\r\n        return new Date().getTime();\r\n    };\r\n    function throttle(func, wait, options) {\r\n        // Returns a function, that, when invoked, will only be triggered at most once\r\n        // during a given window of time. Normally, the throttled function will run\r\n        // as much as it can, without ever going more than once per `wait` duration;\r\n        // but if you'd like to disable the execution on the leading edge, pass\r\n        // `{leading: false}`. To disable execution on the trailing edge, ditto.\r\n        var context, args, result;\r\n        var timeout = null;\r\n        var previous = 0;\r\n        if (!options) options = {};\r\n        var later = function () {\r\n            previous = options.leading === false ? 0 : getNow();\r\n            timeout = null;\r\n            result = func.apply(context, args);\r\n            if (!timeout) context = args = null;\r\n        };\r\n        return function () {\r\n            var now = getNow();\r\n            if (!previous && options.leading === false) previous = now;\r\n            var remaining = wait - (now - previous);\r\n            context = this;\r\n            args = arguments;\r\n            if (remaining <= 0 || remaining > wait) {\r\n                if (timeout) {\r\n                    clearTimeout(timeout);\r\n                    timeout = null;\r\n                }\r\n                previous = now;\r\n                result = func.apply(context, args);\r\n                if (!timeout) context = args = null;\r\n            } else if (!timeout && options.trailing !== false) {\r\n                timeout = setTimeout(later, remaining);\r\n            }\r\n            return result;\r\n        };\r\n    }\r\n    function where(array, query) {\r\n        var found = null;\r\n        if (array) {\r\n            angular.forEach(array, function (item) {\r\n                var has = true;\r\n                angular.forEach(query, function (value, key) {\r\n                    has = has && item[key] === value;\r\n                });\r\n                if (has) {\r\n                    found = item;\r\n                }\r\n            });\r\n        }\r\n        return found;\r\n    }\r\n    function compileController(scope, element, html, data) {\r\n        // console.log('Utils.compileController', element);\r\n        element.html(html);\r\n        var link = $compile(element.contents());\r\n        if (data.controller) {\r\n            var $scope = scope.$new();\r\n            angular.extend($scope, data);\r\n            var controller = $controller(data.controller, { $scope: $scope });\r\n            if (data.controllerAs) {\r\n                scope[data.controllerAs] = controller;\r\n            }\r\n            element.data('$ngControllerController', controller);\r\n            element.children().data('$ngControllerController', controller);\r\n            scope = $scope;\r\n        }\r\n        link(scope);\r\n    }\r\n    var ua = window.navigator.userAgent.toLowerCase();\r\n    var safari = ua.indexOf('safari') !== -1 && ua.indexOf('chrome') === -1;\r\n    var msie = ua.indexOf('trident') !== -1 || ua.indexOf('edge') !== -1 || ua.indexOf('msie') !== -1;\r\n    var chrome = !safari && !msie && ua.indexOf('chrome') !== -1;\r\n    var mobile = ua.indexOf('mobile') !== -1;\r\n    function Utils() {\r\n    }\r\n    function reverseSortOn(key) {\r\n        return function (a, b) {\r\n            if (a[key] < b[key]) {\r\n                return 1;\r\n            }\r\n            if (a[key] > b[key]) {\r\n                return -1;\r\n            }\r\n            // a must be equal to b\r\n            return 0;\r\n        }\r\n    }\r\n    function format(string, prepend, expression) {\r\n        string = string || '';\r\n        prepend = prepend || '';\r\n        var splitted = string.split(',');\r\n        if (splitted.length > 1) {\r\n            var formatted = splitted.shift();\r\n            angular.forEach(splitted, function (value, index) {\r\n                if (expression) {\r\n                    formatted = formatted.split('{' + index + '}').join('\\' + ' + prepend + value + ' + \\'');\r\n                } else {\r\n                    formatted = formatted.split('{' + index + '}').join(prepend + value);\r\n                }\r\n            });\r\n            if (expression) {\r\n                return '\\'' + formatted + '\\'';\r\n            } else {\r\n                return formatted;\r\n            }\r\n        } else {\r\n            return prepend + string;\r\n        }\r\n    }\r\n    function reducer(o, key) {\r\n        return o[key];\r\n    }\r\n    function reducerSetter(o, key, value) {\r\n        if (typeof key == 'string') {\r\n            return reducerSetter(o, key.split('.'), value);\r\n        } else if (key.length == 1 && value !== undefined) {\r\n            return o[key[0]] = value;\r\n        } else if (key.length == 0) {\r\n            return o;\r\n        } else {\r\n            return reducerSetter(o[key[0]], key.slice(1), value);\r\n        }\r\n    }\r\n    function reducerAdder(o, key, value) {\r\n        if (typeof key == 'string') {\r\n            return reducerAdder(o, key.split('.'), value);\r\n        } else if (key.length == 1 && value !== undefined) {\r\n            return (o[key[0]] += value);\r\n        } else if (key.length == 0) {\r\n            return o;\r\n        } else {\r\n            return reducerAdder(o[key[0]], key.slice(1), value);\r\n        }\r\n    }\r\n    Utils.reverseSortOn = reverseSortOn;\r\n    Utils.getTouch = getTouch;\r\n    Utils.getRelativeTouch = getRelativeTouch;\r\n    Utils.getClosest = getClosest;\r\n    Utils.getClosestElement = getClosestElement;\r\n    Utils.throttle = throttle;\r\n    Utils.where = where;\r\n    Utils.format = format;\r\n    Utils.compileController = compileController;\r\n    Utils.reducer = reducer;\r\n    Utils.reducerSetter = reducerSetter;\r\n    Utils.reducerAdder = reducerAdder;\r\n    Utils.toMd5 = function (string) {\r\n        return Md5.encode(string);\r\n    };\r\n    Utils.ua = {\r\n        safari: safari,\r\n        msie: msie,\r\n        chrome: chrome,\r\n        mobile: mobile,\r\n    };\r\n    angular.forEach(Utils.ua, function (value, key) {\r\n        if (value) {\r\n            angular.element(document.getElementsByTagName('body')).addClass(key);\r\n        }\r\n    });\r\n    return Utils;\r\n}]);\r\n\r\nmodule.factory('Vector', function () {\r\n    function Vector(x, y) {\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n    }\r\n    Vector.make = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.size = function (a) {\r\n        return Math.sqrt(a.x * a.x + a.y * a.y);\r\n    };\r\n    Vector.normalize = function (a) {\r\n        var l = Vector.size(a);\r\n        a.x /= l;\r\n        a.y /= l;\r\n        return a;\r\n    };\r\n    Vector.incidence = function (a, b) {\r\n        var angle = Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x);\r\n        // if (angle < 0) angle += 2 * Math.PI;\r\n        // angle = Math.min(angle, (Math.PI * 2 - angle));\r\n        return angle;\r\n    };\r\n    Vector.distance = function (a, b) {\r\n        return Math.sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y));\r\n    };\r\n    Vector.cross = function (a, b) {\r\n        return (a.x * b.y) - (a.y * b.x);\r\n    };\r\n    Vector.difference = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.power = function (a, b) {\r\n        var x = Math.abs(b.x - a.x);\r\n        var y = Math.abs(b.y - a.y);\r\n        return (x + y) / 2;\r\n    };\r\n    Vector.prototype = {\r\n        size: function () {\r\n            return Vector.size(this);\r\n        },\r\n        normalize: function () {\r\n            return Vector.normalize(this);\r\n        },\r\n        incidence: function (b) {\r\n            return Vector.incidence(this, b);\r\n        },\r\n        cross: function (b) {\r\n            return Vector.cross(this, b);\r\n        },\r\n        distance: function (b) {\r\n            return Vector.distance(this, b);\r\n        },\r\n        difference: function (b) {\r\n            return Vector.difference(this, b);\r\n        },\r\n        power: function () {\r\n            return (Math.abs(this.x) + Math.abs(this.y)) / 2;\r\n        },\r\n        towards: function (b, friction) {\r\n            friction = friction || 0.125;\r\n            this.x += (b.x - this.x) * friction;\r\n            this.y += (b.y - this.y) * friction;\r\n            return this;\r\n        },\r\n        add: function (b) {\r\n            this.x += b.x;\r\n            this.y += b.y;\r\n            return this;\r\n        },\r\n        friction: function (b) {\r\n            this.x *= b;\r\n            this.y *= b;\r\n            return this;\r\n        },\r\n        copy: function (b) {\r\n            return new Vector(this.x, this.y);\r\n        },\r\n        toString: function () {\r\n            return '{' + this.x + ',' + this.y + '}';\r\n        },\r\n    };\r\n    return Vector;\r\n});\r\n\r\nmodule.factory('ElementRect', ['Vector', function (Vector) {\r\n    function ElementRect() {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.center = new Vector();\r\n    }\r\n    ElementRect.fromNative = function (nativeElement) {\r\n        return new ElementRect().set(nativeElement);\r\n    }\r\n    ElementRect.prototype = {\r\n        set: function (nativeElement) {\r\n            var rect = nativeElement.getBoundingClientRect();\r\n            this.x = rect.left;\r\n            this.y = rect.top;\r\n            this.width = nativeElement.offsetWidth;\r\n            this.height = nativeElement.offsetHeight;\r\n            this.center.x = this.x + this.width / 2;\r\n            this.center.y = this.y + this.height / 2;\r\n            this.native = nativeElement;\r\n            return this;\r\n        },\r\n        offset: function (vector) {\r\n            this.x += vector.x;\r\n            this.y += vector.y;\r\n            this.center.x = this.x + this.width / 2;\r\n            this.center.y = this.y + this.height / 2;\r\n            return this;\r\n        },\r\n        intersect: function (element) {\r\n            // console.log('intersect.this', this, 'element', element);\r\n            return !(element.x > this.x + this.width ||\r\n                        element.x + element.width < this.x ||\r\n                        element.y > this.y + this.height ||\r\n                        element.y + element.height < this.y);\r\n        },\r\n        toString: function () {\r\n            return '{' + this.x + ',' + this.y + ',' + this.width + ',' + this.height + '}';\r\n        },\r\n    };\r\n    return ElementRect;\r\n}]);\r\n\r\nmodule.factory('Style', function () {\r\n    var prefix = function detectTransformProperty() {\r\n        var transform = 'transform',\r\n            webkit = 'webkitTransform';\r\n        var div = document.createElement(\"DIV\");\r\n        if (typeof div.style[transform] !== 'undefined') {\r\n            ['webkit', 'moz', 'o', 'ms'].every(function (prop) {\r\n                var prefixed = '-' + prop + '-transform';\r\n                if (typeof div.style[prefixed] !== 'undefined') {\r\n                    prefix = prefixed;\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n        } else if (typeof div.style[webkit] !== 'undefined') {\r\n            prefix = '-webkit-transform';\r\n        } else {\r\n            prefix = undefined;\r\n        }\r\n        return prefix;\r\n    }();\r\n    function Style() {\r\n        this.props = {\r\n            scale: 1,\r\n            hoverScale: 1,\r\n            currentScale: 1,\r\n        }\r\n    }\r\n    Style.prototype = {\r\n        set: function (element) {\r\n            var styles = [];\r\n            angular.forEach(this, function (value, key) {\r\n                if (key !== 'props')\r\n                    styles.push(key + ':' + value);\r\n            });\r\n            element.style.cssText = styles.join(';') + ';';\r\n        },\r\n        transform: function (transform) {\r\n            this[prefix] = transform;\r\n        },\r\n        transformOrigin: function (x, y) {\r\n            this[prefix + '-origin-x'] = (Math.round(x * 1000) / 1000) + '%';\r\n            this[prefix + '-origin-y'] = (Math.round(y * 1000) / 1000) + '%';\r\n        },\r\n    };\r\n    Style.prefix = prefix;\r\n    return Style;\r\n});\r\n\n/* global angular, module */\r\n\r\nmodule.service('Droppables', ['ElementRect', function (ElementRect) {\r\n    this.natives = [];\r\n    this.callbacks = [];\r\n    this.rects = [];\r\n    this.add = function (nativeElement, callback) {\r\n        this.natives.push(nativeElement);\r\n        this.callbacks.push(callback || function () { });\r\n        this.rects.push(ElementRect.fromNative(nativeElement));\r\n    };\r\n    this.remove = function (nativeElement) {\r\n        var index = this.natives.indexOf(nativeElement);\r\n        if (index !== -1) {\r\n            this.natives.splice(index, 1);\r\n            this.callbacks.splice(index, 1);\r\n            this.rects.splice(index, 1);\r\n        }\r\n    };\r\n    this.getIntersections = function (item) {\r\n        var intersections = [], element;\r\n        angular.forEach(this.rects, function (rect, index) {\r\n            rect.set(rect.native);\r\n            element = angular.element(rect.native);\r\n            element.removeClass('dropping');\r\n            if (rect.intersect(item)) {\r\n                rect.distance = rect.center.distance(item.center);\r\n                rect.data = this.callbacks[index]();\r\n                intersections.push(rect);\r\n                element.addClass('over');\r\n            } else {\r\n                element.removeClass('over');\r\n            }\r\n        }.bind(this));\r\n        intersections.sort(function (a, b) {\r\n            if (a.distance < b.distance) {\r\n                return -1;\r\n            }\r\n            if (a.distance > b.distance) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n        return intersections;\r\n    };\r\n}]);\r\n\n\n})(window, window.angular);\n"]}