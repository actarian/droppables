!function(t,e){"use strict";var n=e.module("droppables",["ng"]);n.directive("draggableItem",["$parse","$timeout","Utils","Style","ElementRect","Droppables",function(n,r,i,o,u,s){return{require:"ngModel",link:function(c,a,f,l){function h(t){return T(c)&&(x=i.getTouch(t),p()),!1}function d(t){return w=i.getTouch(t),b=x.difference(w),!k&&b.power()>25&&(k=!0,a.addClass("dragging")),k&&($.transform="translateX("+b.x+"px) translateY("+b.y+"px)",$.set(E),I.set(C).offset(b),A=s.getIntersections(I),A.length&&e.element(A[0].native).addClass("dropping")),!1}function m(t){if(k){k=!1,a.removeClass("dragging"),$.transform="none",$.set(E);var i=n(f.droppableIndex)(c),o=n(f.ngModel)(c);if(A.length){var u=null;e.forEach(A,function(t,n){e.element(t.native).removeClass("dropping over"),t.data.droppable(c)&&!u&&(u={from:{index:i,model:o,target:E},to:{index:t.data.index,model:t.data.model,target:t.native}},r(function(){c.$emit("onDropItem",u)}))})}else{var u={from:{index:i,model:o,target:E},to:null};r(function(){c.$emit("onDropOut",u)})}}return y(),!1}function p(){e.element(t).on("touchmove mousemove",d),e.element(t).on("touchend mouseup",m)}function y(){e.element(t).off("touchmove mousemove",d),e.element(t).off("touchend mouseup",m)}function g(){a.on("touchstart mousedown",h)}function v(){a.off("touchstart mousedown",h)}var x,w,b,k,A,C=a[0],M=f.draggableItem||".item",T=void 0!==f.draggableIf?n(f.draggableIf):function(){return!0},E=C.querySelector(M),$=new o,I=new u;c.$on("$destroy",function(){v()}),g()}}}]),n.directive("droppableItem",["$parse","Utils","Style","Droppables",function(t,e,n,r){return{require:"ngModel",link:function(e,n,i,o){function u(){var n=t(i.droppableIndex)(e),r=t(i.ngModel)(e),o=void 0!==i.droppableIf?t(i.droppableIf):function(){return!0};return{index:n,model:r,droppable:o}}var s=n[0];i.droppableItem||".item";r.add(s,u),e.$on("$destroy",function(){r.remove(s)})}}}]),n.factory("Animate",[function(){function e(t,e){this.callback=t,this.isPlaying=!1,this.key=null,this.ticks=0,this.useTimeout=e===!0}return e.prototype={play:function(){function e(r){n.ticks++,n.callback(r,n.ticks),this.useTimeout?n.key=t.setTimeout(e,1e3/60):n.key=t.requestAnimationFrame(e)}var n=this;this.key||(this.isPlaying=!0,e())},pause:function(){this.key&&(this.useTimeout?t.clearTimeout(this.key):t.cancelAnimationFrame(this.key),this.key=null,this.isPlaying=!1)},playpause:function(){this.key?this.pause():this.play()}},e}]),n.factory("Md5",[function(){function t(t,e){var u=t[0],s=t[1],c=t[2],a=t[3];u=n(u,s,c,a,e[0],7,-680876936),a=n(a,u,s,c,e[1],12,-389564586),c=n(c,a,u,s,e[2],17,606105819),s=n(s,c,a,u,e[3],22,-1044525330),u=n(u,s,c,a,e[4],7,-176418897),a=n(a,u,s,c,e[5],12,1200080426),c=n(c,a,u,s,e[6],17,-1473231341),s=n(s,c,a,u,e[7],22,-45705983),u=n(u,s,c,a,e[8],7,1770035416),a=n(a,u,s,c,e[9],12,-1958414417),c=n(c,a,u,s,e[10],17,-42063),s=n(s,c,a,u,e[11],22,-1990404162),u=n(u,s,c,a,e[12],7,1804603682),a=n(a,u,s,c,e[13],12,-40341101),c=n(c,a,u,s,e[14],17,-1502002290),s=n(s,c,a,u,e[15],22,1236535329),u=r(u,s,c,a,e[1],5,-165796510),a=r(a,u,s,c,e[6],9,-1069501632),c=r(c,a,u,s,e[11],14,643717713),s=r(s,c,a,u,e[0],20,-373897302),u=r(u,s,c,a,e[5],5,-701558691),a=r(a,u,s,c,e[10],9,38016083),c=r(c,a,u,s,e[15],14,-660478335),s=r(s,c,a,u,e[4],20,-405537848),u=r(u,s,c,a,e[9],5,568446438),a=r(a,u,s,c,e[14],9,-1019803690),c=r(c,a,u,s,e[3],14,-187363961),s=r(s,c,a,u,e[8],20,1163531501),u=r(u,s,c,a,e[13],5,-1444681467),a=r(a,u,s,c,e[2],9,-51403784),c=r(c,a,u,s,e[7],14,1735328473),s=r(s,c,a,u,e[12],20,-1926607734),u=i(u,s,c,a,e[5],4,-378558),a=i(a,u,s,c,e[8],11,-2022574463),c=i(c,a,u,s,e[11],16,1839030562),s=i(s,c,a,u,e[14],23,-35309556),u=i(u,s,c,a,e[1],4,-1530992060),a=i(a,u,s,c,e[4],11,1272893353),c=i(c,a,u,s,e[7],16,-155497632),s=i(s,c,a,u,e[10],23,-1094730640),u=i(u,s,c,a,e[13],4,681279174),a=i(a,u,s,c,e[0],11,-358537222),c=i(c,a,u,s,e[3],16,-722521979),s=i(s,c,a,u,e[6],23,76029189),u=i(u,s,c,a,e[9],4,-640364487),a=i(a,u,s,c,e[12],11,-421815835),c=i(c,a,u,s,e[15],16,530742520),s=i(s,c,a,u,e[2],23,-995338651),u=o(u,s,c,a,e[0],6,-198630844),a=o(a,u,s,c,e[7],10,1126891415),c=o(c,a,u,s,e[14],15,-1416354905),s=o(s,c,a,u,e[5],21,-57434055),u=o(u,s,c,a,e[12],6,1700485571),a=o(a,u,s,c,e[3],10,-1894986606),c=o(c,a,u,s,e[10],15,-1051523),s=o(s,c,a,u,e[1],21,-2054922799),u=o(u,s,c,a,e[8],6,1873313359),a=o(a,u,s,c,e[15],10,-30611744),c=o(c,a,u,s,e[6],15,-1560198380),s=o(s,c,a,u,e[13],21,1309151649),u=o(u,s,c,a,e[4],6,-145523070),a=o(a,u,s,c,e[11],10,-1120210379),c=o(c,a,u,s,e[2],15,718787259),s=o(s,c,a,u,e[9],21,-343485551),t[0]=f(u,t[0]),t[1]=f(s,t[1]),t[2]=f(c,t[2]),t[3]=f(a,t[3])}function e(t,e,n,r,i,o){return e=f(f(e,t),f(r,o)),f(e<<i|e>>>32-i,n)}function n(t,n,r,i,o,u,s){return e(n&r|~n&i,t,n,o,u,s)}function r(t,n,r,i,o,u,s){return e(n&i|r&~i,t,n,o,u,s)}function i(t,n,r,i,o,u,s){return e(n^r^i,t,n,o,u,s)}function o(t,n,r,i,o,u,s){return e(r^(n|~i),t,n,o,u,s)}function u(e){var n,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)t(i,s(e.substring(n-64,n)));e=e.substring(n-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)o[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(t(i,o),n=0;n<16;n++)o[n]=0;return o[14]=8*r,t(i,o),i}function s(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function c(t){for(var e="",n=0;n<4;n++)e+=h[t>>8*n+4&15]+h[t>>8*n&15];return e}function a(t){for(var e=0;e<t.length;e++)t[e]=c(t[e]);return t.join("")}function f(t,e){return t+e&4294967295}function l(){}var h="0123456789abcdef".split("");return l.encode=function(t){return a(u(t))},"5d41402abc4b2a76b9719d911017c592"!==l.encode("hello")&&(f=function(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}),l}]),n.factory("Utils",["$compile","$controller","Vector","Md5",function(n,r,i,o){function u(t,e){var n=new i;if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var r=null,o=t.originalEvent?t.originalEvent:t,u=o.touches.length?o.touches:o.changedTouches;u&&u.length&&(r=u[0]),r&&(n.x=r.pageX,n.y=r.pageY)}else"click"!=t.type&&"mousedown"!=t.type&&"mouseup"!=t.type&&"mousemove"!=t.type&&"mouseover"!=t.type&&"mouseout"!=t.type&&"mouseenter"!=t.type&&"mouseleave"!=t.type||(n.x=t.pageX,n.y=t.pageY);return e&&(n.s=i.difference(e,n)),n.type=t.type,n}function s(t,e){var n=t[0].getBoundingClientRect(),r=new i(n.left,n.top);return i.difference(r,e)}function c(t,e){var n,r;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]&&(n=t,!0)}),t[n](e))return t;for(;null!==t;){if(r=t.parentElement,null!==r&&r[n](e))return r;t=r}return null}function a(t,e){var n;if(t===e)return t;for(;null!==t;){if(n=t.parentElement,null!==n&&n===e)return n;t=n}return null}function f(t,e,n){var r,i,o,u=null,s=0;n||(n={});var c=function(){s=n.leading===!1?0:x(),u=null,o=t.apply(r,i),u||(r=i=null)};return function(){var a=x();s||n.leading!==!1||(s=a);var f=e-(a-s);return r=this,i=arguments,f<=0||f>e?(u&&(clearTimeout(u),u=null),s=a,o=t.apply(r,i),u||(r=i=null)):u||n.trailing===!1||(u=setTimeout(c,f)),o}}function l(t,n){var r=null;return t&&e.forEach(t,function(t){var i=!0;e.forEach(n,function(e,n){i=i&&t[n]===e}),i&&(r=t)}),r}function h(t,i,o,u){i.html(o);var s=n(i.contents());if(u.controller){var c=t.$new();e.extend(c,u);var a=r(u.controller,{$scope:c});u.controllerAs&&(t[u.controllerAs]=a),i.data("$ngControllerController",a),i.children().data("$ngControllerController",a),t=c}s(t)}function d(){}function m(t){return function(e,n){return e[t]<n[t]?1:e[t]>n[t]?-1:0}}function p(t,n,r){t=t||"",n=n||"";var i=t.split(",");if(i.length>1){var o=i.shift();return e.forEach(i,function(t,e){o=r?o.split("{"+e+"}").join("' + "+n+t+" + '"):o.split("{"+e+"}").join(n+t)}),r?"'"+o+"'":o}return n+t}function y(t,e){return t[e]}function g(t,e,n){return"string"==typeof e?g(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]=n:0==e.length?t:g(t[e[0]],e.slice(1),n)}function v(t,e,n){return"string"==typeof e?v(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]+=n:0==e.length?t:v(t[e[0]],e.slice(1),n)}!function(){for(var e=0,n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[n[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n,r){var i=(new Date).getTime(),o=Math.max(0,16-(i-e)),u=t.setTimeout(function(){n(i+o)},o);return e=i+o,u}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),r=n.length>>>0,i=0;if(2==arguments.length)e=arguments[1];else{for(;i<r&&!(i in n);)i++;if(i>=r)throw new TypeError("Reduce of empty array with no initial value");e=n[i++]}for(;i<r;)i in n&&(e=t(e,n[i],i,n)),i++;return e}})}();var x=Date.now||function(){return(new Date).getTime()},w=t.navigator.userAgent.toLowerCase(),b=w.indexOf("safari")!==-1&&w.indexOf("chrome")===-1,k=w.indexOf("trident")!==-1||w.indexOf("edge")!==-1||w.indexOf("msie")!==-1,A=!b&&!k&&w.indexOf("chrome")!==-1,C=w.indexOf("mobile")!==-1;return d.reverseSortOn=m,d.getTouch=u,d.getRelativeTouch=s,d.getClosest=c,d.getClosestElement=a,d.throttle=f,d.where=l,d.format=p,d.compileController=h,d.reducer=y,d.reducerSetter=g,d.reducerAdder=v,d.toMd5=function(t){return o.encode(t)},d.ua={safari:b,msie:k,chrome:A,mobile:C},e.forEach(d.ua,function(t,n){t&&e.element(document.getElementsByTagName("body")).addClass(n)}),d}]),n.factory("Vector",function(){function t(t,e){this.x=t||0,this.y=e||0}return t.make=function(e,n){return new t(n.x-e.x,n.y-e.y)},t.size=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.normalize=function(e){var n=t.size(e);return e.x/=n,e.y/=n,e},t.incidence=function(t,e){var n=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);return n},t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.difference=function(e,n){return new t(n.x-e.x,n.y-e.y)},t.power=function(t,e){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return(n+r)/2},t.prototype={size:function(){return t.size(this)},normalize:function(){return t.normalize(this)},incidence:function(e){return t.incidence(this,e)},cross:function(e){return t.cross(this,e)},distance:function(e){return t.distance(this,e)},difference:function(e){return t.difference(this,e)},power:function(){return(Math.abs(this.x)+Math.abs(this.y))/2},towards:function(t,e){return e=e||.125,this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},add:function(t){return this.x+=t.x,this.y+=t.y,this},friction:function(t){return this.x*=t,this.y*=t,this},copy:function(e){return new t(this.x,this.y)},toString:function(){return"{"+this.x+","+this.y+"}"}},t}),n.factory("ElementRect",["Vector",function(t){function e(){this.x=0,this.y=0,this.width=0,this.height=0,this.center=new t}return e.fromNative=function(t){return(new e).set(t)},e.prototype={set:function(t){var e=t.getBoundingClientRect();return this.x=e.left,this.y=e.top,this.width=t.offsetWidth,this.height=t.offsetHeight,this.center.x=this.x+this.width/2,this.center.y=this.y+this.height/2,this.native=t,this},offset:function(t){return this.x+=t.x,this.y+=t.y,this.center.x=this.x+this.width/2,this.center.y=this.y+this.height/2,this},intersect:function(t){return!(t.x>this.x+this.width||t.x+t.width<this.x||t.y>this.y+this.height||t.y+t.height<this.y)},toString:function(){return"{"+this.x+","+this.y+","+this.width+","+this.height+"}"}},e}]),n.factory("Style",function(){function t(){this.props={scale:1,hoverScale:1,currentScale:1}}var n=function(){var t="transform",e="webkitTransform",r=document.createElement("DIV");return"undefined"!=typeof r.style[t]?["webkit","moz","o","ms"].every(function(t){var e="-"+t+"-transform";return"undefined"==typeof r.style[e]||(n=e,!1)}):n="undefined"!=typeof r.style[e]?"-webkit-transform":void 0,n}();return t.prototype={set:function(t){var n=[];e.forEach(this,function(t,e){"props"!==e&&n.push(e+":"+t)}),t.style.cssText=n.join(";")+";"},transform:function(t){this[n]=t},transformOrigin:function(t,e){this[n+"-origin-x"]=Math.round(1e3*t)/1e3+"%",this[n+"-origin-y"]=Math.round(1e3*e)/1e3+"%"}},t.prefix=n,t}),n.service("Droppables",["ElementRect",function(t){this.natives=[],this.callbacks=[],this.rects=[],this.add=function(e,n){this.natives.push(e),this.callbacks.push(n||function(){}),this.rects.push(t.fromNative(e))},this.remove=function(t){var e=this.natives.indexOf(t);e!==-1&&(this.natives.splice(e,1),this.callbacks.splice(e,1),this.rects.splice(e,1))},this.getIntersections=function(t){var n,r=[];return e.forEach(this.rects,function(i,o){i.set(i.native),n=e.element(i.native),n.removeClass("dropping"),i.intersect(t)?(i.distance=i.center.distance(t.center),i.data=this.callbacks[o](),r.push(i),n.addClass("over")):n.removeClass("over")}.bind(this)),r.sort(function(t,e){return t.distance<e.distance?-1:t.distance>e.distance?1:0}),r}}])}(window,window.angular);
//# sourceMappingURL=droppables.min.js.map
